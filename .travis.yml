language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: iIJRo4H9RbiBWrcKHNXJOa1+seQcIluEYRehzd0a/2SQCUWXe/vQCNG1Y1tMpPagCIY7vIg0Shjh03smnRQk07Oz7H+0TzH650w1dSxRjB/tWCwlC0E/LULVQtvdrrVtUsHLlVPRaTd8sH6vwG3fR1NwlD+smsvdVFQuu9Z+edHll/QuM+M5VTi+p10JG3fkRsg7h85Q00OKNU+HqPDaLQNU/YUpCpDydB6+To1DCYY5UsjeNU5zHp0hZzMXJAv3+h7V1nllEke4KBJW4Hrjgt7YSAnWUiRx6DMbrmb5r2u4DuRkbHsUaAykedQ3XN901xD2ih84F/HWUrJaM7Dz7RomeDfPEHavNHQR95R7Ig7pSwFdf4ueCyKIEhsKM4WYmW1dYHxULtbxgJ9ci3TFCj6Ay86SCbolk1BCjEm8VTJtPz9bLpUzWoKYqZDYgDRuq4BFXn90YKTW5pF4CBL2CgXdOQB/FevKV15z9flE1apyU6jDRxjIhOSZ7f2+z8rYpXdWqqBf0nMLqfCGJtDTVWNmNjFjVxyvzEoRZQVfSfTgmMrbHj8y4am4WTbZ4RIu8TpXgSUYsbk/obKvl4qe980NIqLVk/gUkt4bPoVZIIHWIqfsP3VuwOEvCcrhuObOQ90H1zG/DI79ELHdSjvgBDtf/JGxzr181my9Kp696kw=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
